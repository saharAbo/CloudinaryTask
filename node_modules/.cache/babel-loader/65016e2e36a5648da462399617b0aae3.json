{"ast":null,"code":"import { writeStorage } from \"@rehooks/local-storage\";\nconst IMAGES_KEY = \"Images\";\n\nconst getImages = async () => {\n  try {\n    let images = localStorage.getItem(IMAGES_KEY);\n\n    if (!images) {\n      const images_list = await fetch(\"https://picsum.photos/v2/list?page=1&limit=7\");\n      images = await images_list.json();\n      writeStorage(IMAGES_KEY, images);\n    }\n  } catch (e) {\n    console.log(\"unable to fetch images from server: \" + e);\n  }\n};\n\nconst addTagToImage = (image, tag) => {\n  let images = JSON.parse(localStorage.getItem(IMAGES_KEY) || \"[]\");\n  let img = null,\n      selectedIndex = null;\n  selectedIndex = images.findIndex(img => img.id == image);\n\n  if (selectedIndex > -1) {\n    img = images[selectedIndex];\n    img.selectedTags = tag;\n    images[selectedIndex] = img;\n  }\n\n  if (selectedIndex > -1 && img) {\n    images[selectedIndex] = img;\n    writeStorage(IMAGES_KEY, images);\n  }\n};\n\nconst removeTagFromImage = (image, tag) => {\n  let images = JSON.parse(localStorage.getItem(IMAGES_KEY) || \"[]\");\n  let selectedIndex = images.findIndex(img => img.id == image);\n\n  if (selectedIndex >= 0) {\n    let img = images[selectedIndex];\n\n    if (img.selectedTags) {\n      const selectedTagIndex = img.selectedTags.indexOf(tag);\n      if (img.selectedTags.indexOf(tag) > -1) img.selectedTags.splice(img.selectedTags.indexOf(tag), 1);\n    }\n\n    images[selectedIndex] = img;\n    writeStorage(IMAGES_KEY, images);\n  }\n};\n\nexport { getImages, addTagToImage, removeTagFromImage };","map":{"version":3,"names":["writeStorage","IMAGES_KEY","getImages","images","localStorage","getItem","images_list","fetch","json","e","console","log","addTagToImage","image","tag","JSON","parse","img","selectedIndex","findIndex","id","selectedTags","removeTagFromImage","selectedTagIndex","indexOf","splice"],"sources":["C:/Users/AA/Desktop/NewOne/src/db/images.js"],"sourcesContent":["import { writeStorage } from \"@rehooks/local-storage\";\n\nconst IMAGES_KEY = \"Images\";\n\nconst getImages = async () => {\n  try {\n    let images = localStorage.getItem(IMAGES_KEY);\n    if (!images) {\n      const images_list = await fetch(\n        \"https://picsum.photos/v2/list?page=1&limit=7\"\n      );\n      images = await images_list.json();\n      writeStorage(IMAGES_KEY, images);\n    }\n  } catch (e) {\n    console.log(\"unable to fetch images from server: \" + e);\n  }\n};\n\nconst addTagToImage = (image, tag) => {\n  let images = JSON.parse(localStorage.getItem(IMAGES_KEY) || \"[]\");\n  let img = null,\n    selectedIndex = null;\n  selectedIndex = images.findIndex((img) => img.id == image);\n\n  if (selectedIndex > -1) {\n    img = images[selectedIndex];\n    img.selectedTags = tag;\n    images[selectedIndex] = img;\n  }\n  if (selectedIndex > -1 && img) {\n    images[selectedIndex] = img;\n    writeStorage(IMAGES_KEY, images);\n  }\n};\n\nconst removeTagFromImage = (image, tag) => {\n  let images = JSON.parse(localStorage.getItem(IMAGES_KEY) || \"[]\");\n  let selectedIndex = images.findIndex((img) => img.id == image);\n  if (selectedIndex >= 0) {\n    let img = images[selectedIndex];\n    if (img.selectedTags) {\n      const selectedTagIndex = img.selectedTags.indexOf(tag);\n      if (img.selectedTags.indexOf(tag) > -1)\n        img.selectedTags.splice(img.selectedTags.indexOf(tag), 1);\n    }\n    images[selectedIndex] = img;\n    writeStorage(IMAGES_KEY, images);\n  }\n};\n\nexport { getImages, addTagToImage, removeTagFromImage };\n"],"mappings":"AAAA,SAASA,YAAT,QAA6B,wBAA7B;AAEA,MAAMC,UAAU,GAAG,QAAnB;;AAEA,MAAMC,SAAS,GAAG,YAAY;EAC5B,IAAI;IACF,IAAIC,MAAM,GAAGC,YAAY,CAACC,OAAb,CAAqBJ,UAArB,CAAb;;IACA,IAAI,CAACE,MAAL,EAAa;MACX,MAAMG,WAAW,GAAG,MAAMC,KAAK,CAC7B,8CAD6B,CAA/B;MAGAJ,MAAM,GAAG,MAAMG,WAAW,CAACE,IAAZ,EAAf;MACAR,YAAY,CAACC,UAAD,EAAaE,MAAb,CAAZ;IACD;EACF,CATD,CASE,OAAOM,CAAP,EAAU;IACVC,OAAO,CAACC,GAAR,CAAY,yCAAyCF,CAArD;EACD;AACF,CAbD;;AAeA,MAAMG,aAAa,GAAG,CAACC,KAAD,EAAQC,GAAR,KAAgB;EACpC,IAAIX,MAAM,GAAGY,IAAI,CAACC,KAAL,CAAWZ,YAAY,CAACC,OAAb,CAAqBJ,UAArB,KAAoC,IAA/C,CAAb;EACA,IAAIgB,GAAG,GAAG,IAAV;EAAA,IACEC,aAAa,GAAG,IADlB;EAEAA,aAAa,GAAGf,MAAM,CAACgB,SAAP,CAAkBF,GAAD,IAASA,GAAG,CAACG,EAAJ,IAAUP,KAApC,CAAhB;;EAEA,IAAIK,aAAa,GAAG,CAAC,CAArB,EAAwB;IACtBD,GAAG,GAAGd,MAAM,CAACe,aAAD,CAAZ;IACAD,GAAG,CAACI,YAAJ,GAAmBP,GAAnB;IACAX,MAAM,CAACe,aAAD,CAAN,GAAwBD,GAAxB;EACD;;EACD,IAAIC,aAAa,GAAG,CAAC,CAAjB,IAAsBD,GAA1B,EAA+B;IAC7Bd,MAAM,CAACe,aAAD,CAAN,GAAwBD,GAAxB;IACAjB,YAAY,CAACC,UAAD,EAAaE,MAAb,CAAZ;EACD;AACF,CAfD;;AAiBA,MAAMmB,kBAAkB,GAAG,CAACT,KAAD,EAAQC,GAAR,KAAgB;EACzC,IAAIX,MAAM,GAAGY,IAAI,CAACC,KAAL,CAAWZ,YAAY,CAACC,OAAb,CAAqBJ,UAArB,KAAoC,IAA/C,CAAb;EACA,IAAIiB,aAAa,GAAGf,MAAM,CAACgB,SAAP,CAAkBF,GAAD,IAASA,GAAG,CAACG,EAAJ,IAAUP,KAApC,CAApB;;EACA,IAAIK,aAAa,IAAI,CAArB,EAAwB;IACtB,IAAID,GAAG,GAAGd,MAAM,CAACe,aAAD,CAAhB;;IACA,IAAID,GAAG,CAACI,YAAR,EAAsB;MACpB,MAAME,gBAAgB,GAAGN,GAAG,CAACI,YAAJ,CAAiBG,OAAjB,CAAyBV,GAAzB,CAAzB;MACA,IAAIG,GAAG,CAACI,YAAJ,CAAiBG,OAAjB,CAAyBV,GAAzB,IAAgC,CAAC,CAArC,EACEG,GAAG,CAACI,YAAJ,CAAiBI,MAAjB,CAAwBR,GAAG,CAACI,YAAJ,CAAiBG,OAAjB,CAAyBV,GAAzB,CAAxB,EAAuD,CAAvD;IACH;;IACDX,MAAM,CAACe,aAAD,CAAN,GAAwBD,GAAxB;IACAjB,YAAY,CAACC,UAAD,EAAaE,MAAb,CAAZ;EACD;AACF,CAbD;;AAeA,SAASD,SAAT,EAAoBU,aAApB,EAAmCU,kBAAnC"},"metadata":{},"sourceType":"module"}